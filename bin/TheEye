#!/usr/bin/perl -Ilib

use strict;
use warnings;
use TheEye;
use Data::Dumper;

my $testdir = shift || 'share/TheEye/t';

my $mon = TheEye->new(debug=> 1, test_dir => $testdir);
$mon->debug(1);
#$mon->load_plugin('Store::RRD');
#$mon->load_plugin('Store::Collectd');
#$mon->load_plugin('Graph::RRD');
$mon->load_plugin('Notify::Oncall');
$mon->oncall_token('da860dcc8ab87f28a50282bbe800f5ec');
#$mon->rrd_dir('rrds/');
#$mon->img_dir('images/');
#$mon->prowl_apikeys(['XXXXXXXXXXXXXXXXXXXXXXX']);
$mon->oncall_host($mon->hostname);
my $results;
@{$results} = $mon->run();
#$mon->save($results);
#$mon->graph($results);
$mon->notify($results);

#print Dumper($results);
